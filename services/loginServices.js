const con=require('../connectDB/dbConfig');const bcrypt=require('bcrypt');const moment=require('moment');let getUserByPhone=(phone)=>{    return new Promise((resolve,reject)=>{        try {         let cmd="select * from users where PhoneNumber=?";         con.query(cmd,phone,(error,rows)=>{             if(error){                 reject(error);             }             if(rows){                 let user=rows[0];                 resolve(user);             }         })        }catch (error) {            reject(error);        }    })};let CompareUserPassword=(password,user)=>{    return new Promise((resolve,reject)=>{        try {         bcrypt.compare(password,user.Password,(error,match)=>{             if(error){                 reject(error);             }             if(match){                 resolve(match);             }         })        }catch (error) {            reject(error);        }    })}let getUserByID=(id)=>{    return new Promise((resolve,reject)=>{        try {            let cmd="select * from users where id=?";            con.query(cmd,id,(error,rows)=>{                if(error){                    reject(error);                }                if(rows){                    let user=rows[0];                    resolve(user);                }            })        }catch (e) {            reject(e);        }    })};let logoutUser=(id)=>{    return new Promise((resolve,reject)=>{        try {            let inactiveMoment=moment().format('DD/MM/YYYY, h:mm a');            let cmd="update users set Login=? where id=?";            con.query(cmd,[inactiveMoment,id],(error,rows)=>{                if(error){                    reject(error);                }                if(rows){                    resolve(rows);                }            })        }catch (error) {            reject(error);        }    })};let updateLogin=(userID)=>{    return new Promise((resolve,reject)=>{        try {            let onlinetxt='Online';            let cmd="update users set Login=? where id=?";            con.query(cmd,[onlinetxt,userID],(error,rows)=>{                if(error){                    reject(error)                }                if(rows){                    resolve(rows);                }            })        }catch (error) {            reject(error);        }    })};module.exports={    getUserByPhone:getUserByPhone,    CompareUserPassword:CompareUserPassword,    getUserByID:getUserByID,    logoutUser:logoutUser,    updateLogin:updateLogin};